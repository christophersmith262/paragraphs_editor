services:

  paragraphs_ckeditor.command.context_converter:
    class: Drupal\paragraphs_ckeditor\ParamConverter\CommandContextConverter
    arguments: ['@paragraphs_ckeditor.command.context_factory']
    tags:
      - { name: paramconverter }

  paragraphs_ckeditor.command.context_factory:
    class: Drupal\paragraphs_ckeditor\EditorCommand\CommandContextFactory
    arguments: ['@entity_type.manager', '@paragraphs_ckeditor.edit_buffer.cache']

  paragraphs_ckeditor.command.response_handler:
    class: Drupal\paragraphs_ckeditor\EditorCommand\ResponseHandler
    arguments: ['@paragraphs_ckeditor.bundle_selector.manager', '@entity_type.manager', '@module_handler', '@entity.manager']

  paragraphs_ckeditor.edit_buffer.cache:
    class: Drupal\paragraphs_ckeditor\EditBuffer\EditBufferCache
    arguments: ['@keyvalue.expirable', '%paragraphs_ckeditor.edit_buffer.cache.lifetime', 'current_user']

  paragraphs_ckeditor.edit_buffer.item_duplicator:
    class: Drupal\paragraphs_ckeditor\EditBuffer\EditBufferItemDuplicator

  paragraphs_ckeditor.delivery_provider.manager:
    class: Drupal\paragraphs_ckeditor\EditorCommand\DeliveryProvider\DeliveryProviderManager
    arguments: [delivery_provider, '@container.namespaces', '@cache.discovery', '@module_handler']

  paragraphs_ckeditor.bundle_selector.manager:
    class: Drupal\paragraphs_ckeditor\EditorCommand\BundleSelector\BundleSelectorManager
    arguments: [bundle_selector, '@container.namespaces', '@cache.discovery', '@module_handler']

parameters:
  paragraphs_ckeditor.edit_buffer.cache.lifetime: 24000
